/*
* jQuery imageHighlighter plug-in
* <http://wowmotty.blogspot.com/2010/06/imagehighlighter-v10.html>
*
* @v1.0   - 06-30-2010 (major overhaul of code & renaming of plugin)
* @author Rob G <wowmotty@gmail.com>
*/

(function($){$.imageHighlighter=function(c,j){var a=this;a.$el=$(c);a.el=c;var d,e=a.$el.parent();a.$el.data("imageHighlighter",a);a.init=function(){a.options=$.extend({},$.imageHighlighter.defaultOptions,j);if(a.$el[0].tagName!="IMG")return false;a.options.editMode=false;a.$el.wrap('<div class="imageHighlighter"></div>').before('<div class="imgHLDark"></div><div class="imgHLLight"></div>');var b=$(a.options.list).click(function(){return false});jQuery().hoverIntent?b.hoverIntent({over:function(){a.imgHLHover($(this))},
timeout:a.options.hoverTimeout,out:function(){a.imgHLUnhover()}}):b.hover(function(){a.imgHLHover($(this))},function(){a.imgHLUnhover()})};a.imgHLHover=function(b){if(b.attr("rel")!=""){b.addClass(a.options.current);a.$el.data("currentHighlight",b);$(a.options.descripClass).html(b.parent().find(a.options.descrip).html());a.$el.trigger("highlightActive",{object:b});if(!a.options.editMode){d=b.attr("rel").split(",");b=a.$el.position().left;var i=a.$el.position().top,f=parseInt(a.options.borderSize,
10),g=parseInt(d[0],10)||0,h=parseInt(d[1],10)||0,k=parseInt(d[2],10)||0,l=parseInt(d[3],10)||0;d=$.browser.msie?f*2:0;e.find(".imgHLDark").css({height:a.$el.outerHeight()+1,width:a.$el.outerWidth()+1,position:"absolute",top:i,left:b});e.find(".imgHLLight").css({background:"url("+a.$el.attr("src")+") -"+g+"px -"+h+"px no-repeat",position:"absolute",left:g+b-f,top:h+i-f,width:k+d-g,height:l+d-h,border:a.options.borderColor+" "+f+"px "+a.options.borderType,"z-index":a.options.zindex}).show();a.options.overlay&&
e.find(".imgHLDark").addClass("imgHLOverlay").css("z-index",parseInt(a.options.zindex,10)-1).show()}}};a.imgHLUnhover=function(){$(a.options.list).filter("."+a.options.current).removeClass(a.options.current);$(a.options.descripClass).empty();a.$el.data("currentHighlight",null);a.$el.trigger("highlightCleared",{object:a.$el.data("currentHighlight")});a.options.editMode||e.find(".imgHLDark").removeClass("imgHLOverlay").end().find(".imgHLLight").hide()};a.highlight=function(b){if(typeof b!=="undefined"){a.imgHLUnhover();
c=$(a.options.list);if(isNaN(b)){b=b.charAt(0).match(/\.|#/)?b:":contains("+b+")";c=c.filter(b+":first")}else{b=parseInt(b,10);b=b<$(a.options.list).length?b:0;c=c.eq(b-1)}c.length&&a.imgHLHover(c)}return a.$el.data("currentHighlight")||null};a.init()};$.imageHighlighter.defaultOptions={borderColor:"#fff",borderSize:4,borderType:"solid",list:"a",descrip:"p",descripClass:".description",overlay:true,current:"current",hoverTimeout:100,zindex:10};$.fn.imageHighlighter=function(c){return this.each(function(){new $.imageHighlighter(this,
c)})};$.fn.getimageHighlighter=function(){this.data("imageHighlighter")}})(jQuery);
